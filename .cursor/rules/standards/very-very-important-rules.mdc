---
alwaysApply: true
---

# VERY IMPORTANT RULES !!!

## 逻辑与视图分离原则
- 业务逻辑不在视图层实现，而是在控制器层实现，控制器包括presenter，store，services
- 视图层进一步分为交互层和编排层，交互层负责展示效果和用户交互，编排层负责组织和编排
    - 交护层复用原则：一般来说，除非特别简单的交互，或者预期未来不太可能复用，否则都应该封装为可复用组件
    - 编排层：
        - 不应该包含展示细节和交互细节，也不应该包含业务逻辑的实现（除非是少量的\必要的`胶水代码`），只应该包含界面布局、编排逻辑和业务逻辑的调用。这意味着尽可能少的样式代码，或者最好完全没有。
        - 不应该被re-export，而应该被直接导入使用。
        - 编排层的所有代码，都必须能通过其名称（而非实现）体现其职责。可以认为，编排层调用的所有能力，都是封装过的。
        - 编排层应该尽量避免组件间通信，除非通信的对象是可复用的，这种情况下难以避免通信。


## 业务组件直连总线原则
对于业务组件： 如果针对可复用场景设计，避免非必要的属性透传，而是采用统一控制器，下层组件在任意位置通过超链接（全局变量|context｜event bus）访问统一控制器。控制器包括：
- store
- servies
- presenter



## 职责重新分配类型的重构步骤和原则（代码重构必读！）
- 核心原则【无损最小改动】：尽可能保持原有代码结构和逻辑，只进行最小的改动，确保重构过程中不会引入新的问题。
- 如果职责从A->B，实现顺序是先在B增加，再在A删除。